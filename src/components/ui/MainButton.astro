---
import { HugeiconsIcon } from '@hugeicons/react'
import type { IconSvgElement } from '@hugeicons/react'

export interface Props {
  size?: 'sm' | 'md' | 'lg'
  variant?: 'default' | 'main' | 'ghost' | 'soft'
  icon?: IconSvgElement
  iconPosition?: 'left' | 'right'
  class?: string
  [key: string]: any
}

const { 
  size = 'md', 
  variant = 'default', 
  icon, 
  iconPosition = 'right',
  class: className = '',
  ...props 
} = Astro.props

const sizes = {
  sm: 'h-10 text-sm px-4 gap-2 rounded-sm',
  md: 'h-14 text-base px-6 gap-3 rounded',
  lg: 'h-16 text-lg px-8 gap-4 rounded-lg'
}

const variants = {
  default: 'bg-primary hover:bg-primary-600 text-white',
  main: 'btn-main text-white',
  ghost: 'bg-transparent hover:bg-primary-100 text-primary-700',
  soft: 'bg-primary-100 hover:bg-primary-200 text-primary-900'
}

const iconSizes = {
  sm: 16,
  md: 20,
  lg: 24
}
---

<button 
  class:list={[
    'inline-flex items-center justify-center cursor-pointer font-semibold transition-all duration-300 ease-in-out group',
    sizes[size],
    variants[variant],
    className
  ]}
  {...props}
>
  {icon && iconPosition === 'left' && (
    <div class="group-hover:-ml-1 group-hover:mr-1 transition-all duration-300 ease-in-out">
      <HugeiconsIcon icon={icon} size={iconSizes[size]} strokeWidth={2} />
    </div>
  )}
  
  <slot />
  
  {icon && iconPosition === 'right' && (
    <div class="group-hover:ml-1 group-hover:-mr-1 transition-all duration-300 ease-in-out">
      <HugeiconsIcon icon={icon} size={iconSizes[size]} strokeWidth={2} />
    </div>
  )}
</button>

<style>
  .btn-main{
    background: linear-gradient(90deg, var(--c1, var(--color-primary-600)), var(--c2, var(--color-primary-400)) 51%, var(--c1, var(--color-primary-600))) var(--x, 0)/ 200%;
    transition: all 0.3s ease-in-out;
  }

  .btn-main:hover { --x: 100%; }
</style>