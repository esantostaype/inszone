---
import Head from '@/components/Head.astro'
import Header from '@/components/Header.astro'
import '@/styles/global.css'
interface Props {
	title?: string
	description?: string
	image?: string
}
const { title, description, image } = Astro.props
---

<!doctype html>
<html lang="en">
  <Head title={ title } description={ description } image={ image } />
  <body data-scroll-container>
    <Header/>
    <main data-scroll-section>
      <slot />
    </main>
  </body>
</html>

<script>
  import LocomotiveScroll from 'locomotive-scroll'
  import { RevealFade, RevealLeft, RevealUp } from '@/scripts/reveal'

  interface ScrollInstance {
    destroy: () => void
  }

  let locomotiveScroll: ScrollInstance | null = null

  const initScroll = (): void => {
    if ( locomotiveScroll ) {
      locomotiveScroll.destroy()
    }

    window.scrollTo(0, 0)

    const revealUp = new RevealUp()
    revealUp.observe()
    const revealLeft = new RevealLeft()
    revealLeft.observe()
    const revealFade = new RevealFade()
    revealFade.observe()

    locomotiveScroll = new LocomotiveScroll({
      smooth: true,
      mobile: {
        smooth: false
      },
      tablet: {
        smooth: false
      }
    } as any)
  }

  document.addEventListener("astro:page-load", () => {
    initScroll()
  })
</script>